/**
 * @author Ã’scar Casajuana a.k.a. elboletaire <elboletaire at underave dot net>
 * @link https://github.com/elboletaire/password-strength-meter
 * @license GPL-3.0
 */
!function(l){"use strict";function e(h,i){function c(a,e){for(var s="",t=!1,n=0;n<e.length;n++){t=!0;for(var r=0;r<a&&r+n+a<e.length;r++)t=t&&e.charAt(r+n)===e.charAt(r+n+a);r<a&&(t=!1),t?(n+=a-1,t=!1):s+=e.charAt(n)}return s}return i=l.extend({},{shortPass:"The password is too short",badPass:"Weak; try combining letters & numbers",goodPass:"Medium; try using special characters",strongPass:"Strong password",containsUsername:"The password contains the username",enterPass:"Type your password",showPercent:!1,showText:!0,animate:!0,animateSpeed:"fast",username:!1,usernamePartialMatch:!0,minimumLength:4},i),function(){var a=!0,n=i.showText,r=i.showPercent,e=l("<div>").addClass("pass-graybar"),o=l("<div>").addClass("pass-colorbar"),s=l("<div>").addClass("pass-wrapper").append(e.append(o));return h.parent().addClass("pass-strength-visible"),i.animate&&(s.css("display","none"),a=!1,h.parent().removeClass("pass-strength-visible")),i.showPercent&&(r=l("<span>").addClass("pass-percent").text("0%"),s.append(r)),i.showText&&(n=l("<span>").addClass("pass-text").html(i.enterPass),s.append(n)),h.after(s),h.keyup(function(){var a=i.username||"";a&&(a=l(a).val());var e=function(a,e){var s=0;if(a.length<i.minimumLength)return-1;if(i.username){if(a.toLowerCase()===e.toLowerCase())return-2;if(i.usernamePartialMatch&&e.length){var t=new RegExp(e.toLowerCase());if(a.toLowerCase().match(t))return-2}}s+=4*a.length,s+=c(1,a).length-a.length,s+=c(2,a).length-a.length,s+=c(3,a).length-a.length,s+=c(4,a).length-a.length,a.match(/(.*[0-9].*[0-9].*[0-9])/)&&(s+=5);var n=".*[!,@,#,$,%,^,&,*,?,_,~]";return n=new RegExp("("+n+n+")"),a.match(n)&&(s+=5),a.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(s+=10),a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)&&(s+=15),a.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&a.match(/([0-9])/)&&(s+=15),a.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&a.match(/([a-zA-Z])/)&&(s+=15),(a.match(/^\w+$/)||a.match(/^\d+$/))&&(s-=10),100<s&&(s=100),s<0&&(s=0),s}(h.val(),a);h.trigger("password.score",[e]);var s=e<0?0:e;if(o.css({backgroundPosition:"0px -"+s+"px",width:s+"%"}),i.showPercent&&r.html(s+"%"),i.showText){var t=function(a){return-1===a?i.shortPass:-2===a?i.containsUsername:(a=a<0?0:a)<34?i.badPass:a<68?i.goodPass:i.strongPass}(e);!h.val().length&&e<=0&&(t=i.enterPass),n.html()!==l("<div>").html(t).html()&&(n.html(t),h.trigger("password.text",[t,e]))}}),i.animate&&(h.focus(function(){a||s.slideDown(i.animateSpeed,function(){a=!0,h.parent().addClass("pass-strength-visible")})}),h.blur(function(){!h.val().length&&a&&s.slideUp(i.animateSpeed,function(){a=!1,h.parent().removeClass("pass-strength-visible")})})),this}.call(this)}l.fn.password=function(a){return this.each(function(){new e(l(this),a)})}}(jQuery);