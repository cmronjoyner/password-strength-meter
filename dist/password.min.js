/**
 * @author Ã’scar Casajuana a.k.a. elboletaire <elboletaire at underave dot net>
 * @link https://github.com/elboletaire/password-strength-meter
 * @license GPL-3.0
 */
!function(h){"use strict";function e(c,i){function l(s,e){for(var t="",a=!1,n=0;n<e.length;n++){a=!0;for(var r=0;r<s&&r+n+s<e.length;r++)a=a&&e.charAt(r+n)===e.charAt(r+n+s);r<s&&(a=!1),a?(n+=s-1,a=!1):t+=e.charAt(n)}return t}return i=h.extend({},{shortPass:"The password is too short",badPass:"Weak; try combining letters & numbers",goodPass:"Medium; try using special characters",strongPass:"Strong password",containsUsername:"The password contains the username",enterPass:"Type your password",showPercent:!1,showText:!0,animate:!0,animateSpeed:"fast",username:!1,usernamePartialMatch:!0,minimumLength:4,closestSelector:"div"},i),function(){var s=!0,n=i.showText,r=i.showPercent,e=h("<div>").addClass("pass-graybar"),o=h("<div>").addClass("pass-colorbar"),t=h("<div>").addClass("pass-wrapper").append(e.append(o));return c.closest(i.closestSelector).addClass("pass-strength-visible"),i.animate&&(t.css("display","none"),s=!1,c.closest(i.closestSelector).removeClass("pass-strength-visible")),i.showPercent&&(r=h("<span>").addClass("pass-percent").text("0%"),t.append(r)),i.showText&&(n=h("<span>").addClass("pass-text").html(i.enterPass),t.append(n)),c.closest(i.closestSelector).append(t),c.keyup(function(){var s=i.username||"";s&&(s=h(s).val());var e=function(s,e){var t=0;if(s.length<i.minimumLength)return-1;if(i.username){if(s.toLowerCase()===e.toLowerCase())return-2;if(i.usernamePartialMatch&&e.length){var a=new RegExp(e.toLowerCase());if(s.toLowerCase().match(a))return-2}}t+=4*s.length,t+=l(1,s).length-s.length,t+=l(2,s).length-s.length,t+=l(3,s).length-s.length,t+=l(4,s).length-s.length,s.match(/(.*[0-9].*[0-9].*[0-9])/)&&(t+=5);var n=".*[!,@,#,$,%,^,&,*,?,_,~]";return n=new RegExp("("+n+n+")"),s.match(n)&&(t+=5),s.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(t+=10),s.match(/([a-zA-Z])/)&&s.match(/([0-9])/)&&(t+=15),s.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&s.match(/([0-9])/)&&(t+=15),s.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&s.match(/([a-zA-Z])/)&&(t+=15),(s.match(/^\w+$/)||s.match(/^\d+$/))&&(t-=10),100<t&&(t=100),t<0&&(t=0),t}(c.val(),s);c.trigger("password.score",[e]);var t=e<0?0:e;if(o.css({backgroundPosition:"0px -"+t+"px",width:t+"%"}),i.showPercent&&r.html(t+"%"),i.showText){var a=function(s){return-1===s?i.shortPass:-2===s?i.containsUsername:(s=s<0?0:s)<34?i.badPass:s<68?i.goodPass:i.strongPass}(e);!c.val().length&&e<=0&&(a=i.enterPass),n.html()!==h("<div>").html(a).html()&&(n.html(a),c.trigger("password.text",[a,e]))}}),i.animate&&(c.focus(function(){s||t.slideDown(i.animateSpeed,function(){s=!0,c.closest(i.closestSelector).addClass("pass-strength-visible")})}),c.blur(function(){!c.val().length&&s&&t.slideUp(i.animateSpeed,function(){s=!1,c.closest(i.closestSelector).removeClass("pass-strength-visible")})})),this}.call(this)}h.fn.password=function(s){return this.each(function(){new e(h(this),s)})}}(jQuery);